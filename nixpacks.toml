[phases.setup]
nixPkgs = ["python311", "python311Packages.pip", "chromium", "chromedriver"]

[phases.install]
cmds = [
  "cd backend && python3 -m venv venv && venv/bin/pip install -r requirements.txt"
]

[start]
cmd = "cd backend && venv/bin/python -m gunicorn --bind 0.0.0.0:$PORT --workers 2 --threads 2 --timeout 120 app.main:app"

[variables]
CHROME_BIN = "/root/.nix-profile/bin/chromium"
CHROMEDRIVER_PATH = "/root/.nix-profile/bin/chromedriver"
